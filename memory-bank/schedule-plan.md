# 日程表页面设计文档

## 一、页面功能概述

日程表页面用于管理个人日程安排，支持添加、修改、完成日程，并提供筛选和排序功能。

---

## 二、页面布局

### 1. 顶部操作栏

从左到右依次为：

- **按时间排序按钮**：带图标的按钮，点击切换升序/降序排列
- **仅显示未完成按钮**：筛选按钮，点击只显示未完成的日程
- **新增日程按钮**：蓝色背景的主按钮，位于右侧，点击弹出新增日程表单

### 2. 日程列表区域

#### 表头设计

| 列名     | 说明                                                   |
| -------- | ------------------------------------------------------ |
| 日期     | 显示日期（如：2024 年 1 月 29 日）和星期（如：星期一） |
| 时间     | 显示时间，精确到分钟（如：09:00）                      |
| 日程内容 | 日程标题和详细信息（副标题/附加说明）                  |
| 状态     | 复选框，用于标记日程是否完成                           |

#### 列表行设计

每行日程包含：

- **日期列**：
  - 主文本：日期（格式：YYYY 年 M 月 D 日）
  - 副文本：星期（灰色小字）
- **时间列**：
  - 时间显示（格式：HH:mm）
  - 蓝色字体高亮
- **日程内容列**：
  - 主标题：日程名称/简短描述
  - 副标题：附加信息（如：会议室 A / 预计 1 小时、线上会议 / 预计 2 小时）
- **状态列**：
  - 未完成：空白复选框
  - 已完成：蓝色勾选的复选框，日程内容显示删除线

---

## 三、核心功能

### 1. 添加日程

- 点击「+ 新增日程」按钮
- 弹出表单弹窗，包含以下字段：
  - 日期选择器（必填）
  - 时间选择器（必填，精确到分钟）
  - 日程标题（必填）
  - 日程描述/备注（选填）
- 提交后日程自动按时间排序插入列表

### 2. 修改日程

- 单击日程行进入编辑模式
- 弹出与新增相同的表单，预填充现有数据
- 修改后保存更新

### 3. 完成日程

- 点击右侧复选框标记完成
- 完成的日程：
  - 复选框显示蓝色勾选状态
  - 日程内容文字添加删除线样式
  - 移动到列表底部（在所有未完成日程之后）

### 4. 删除日程

- 右键点击日程行，弹出删除确认
- 确认后从列表中移除

---

## 四、筛选与排序功能

### 1. 按时间排序

- 默认按日期时间升序排列（最近的在前）
- 点击「按时间排序」按钮可切换升序/降序
- 已完成的日程始终排在未完成日程之后

### 2. 仅显示未完成

- 点击「仅显示未完成」按钮
- 隐藏所有已完成的日程
- 再次点击恢复显示全部日程

---

## 五、日期高亮规则

根据日程日期与当前日期的关系，使用不同颜色高亮：

| 日期类型 | 高亮颜色            | 说明             |
| -------- | ------------------- | ---------------- |
| 当天日程 | 橙色/黄色背景或边框 | 提醒用户今日待办 |
| 明天日程 | 蓝色背景或边框      | 提前关注明日安排 |
| 其他日期 | 无特殊高亮          | 普通显示         |

---

## 六、分页功能

- 底部显示分页信息：「共 X 个日程，Y 个已完成」
- 分页导航：「上一页」、页码、「下一页」
- 每页显示固定数量的日程（如 10 条）

---

## 七、数据结构设计

### IndexedDB 对象仓库：`schedules`

| 字段名        | 含义         | 存储类型             | 说明           |
| ------------- | ------------ | -------------------- | -------------- |
| `id`          | 日程唯一标识 | string / uuid        | 自动生成       |
| `date`        | 日程日期     | string（YYYY-MM-DD） | 必填           |
| `time`        | 日程时间     | string（HH:mm）      | 必填           |
| `title`       | 日程标题     | string               | 必填，简短描述 |
| `description` | 日程描述     | string               | 选填，附加信息 |
| `completed`   | 是否完成     | boolean              | 默认 false     |
| `createdAt`   | 创建时间     | string（ISO Date）   | 系统生成       |
| `updatedAt`   | 更新时间     | string（ISO Date）   | 最近修改时间   |

### 索引设计

- `date`：按日期查询和排序
- `completed`：按完成状态筛选
- `date_time`：复合索引，用于时间排序

---

## 八、组件规划

```
src/
├── components/
│   ├── ScheduleCard.tsx      # 日程行组件
│   ├── ScheduleForm.tsx      # 新增/编辑日程表单
│   └── ScheduleFilterBar.tsx # 日程筛选栏
│
├── pages/
│   └── SchedulePage.tsx      # 日程表页面（替换 CalendarPage）
│
├── store/
│   └── scheduleStore.ts      # 日程状态管理
│
└── lib/
    └── db.ts                 # 扩展 IndexedDB 操作，添加 schedules 仓库
```

---

## 九、UI 样式要点

1. **整体风格**：与投递记录表页面保持一致，简洁现代
2. **按钮样式**：
   - 筛选按钮：白色背景，灰色边框
   - 新增按钮：蓝色背景，白色文字
3. **表格样式**：
   - 表头灰色背景
   - 行间有分隔线
   - 悬停时行背景变色
4. **时间显示**：蓝色字体，突出显示
5. **完成状态**：
   - 未完成：空心复选框
   - 已完成：蓝色实心勾选框，文字添加删除线
